import 'package:flutter/material.dart';                     // Material Design UI toolkit ржЗржо╨┐╨╛╤А╤В (Widget, Theme, Icon ржЗрждрзНржпрж╛ржжрж┐ ржмрзНржпржмрж╣рж╛рж░ ржХрж░рждрзЗ)

class WishlistCartApp extends StatefulWidget {              // StatefulWidget: UI ржбрж╛ржЗржирж╛ржорж┐ржХржнрж╛ржмрзЗ ржмржжрж▓рж╛ржмрзЗ (state change рж╣рж▓рзЗ rebuild рж╣ржмрзЗ)
  const WishlistCartApp({super.key});                       // const constructor: widget tree-рждрзЗ ржЕржкрзНржЯрж┐ржорж╛ржЗржЬрзЗрж╢ржирзЗрж░ ржЬржирзНржп

  @override
  State<WishlistCartApp> createState() => _WishlistCartAppState(); // State object рждрзИрж░рж┐ ржХрж░рзЗ ржпрж╛ UI ржУ state рж╣рзНржпрж╛ржирзНржбрзЗрж▓ ржХрж░ржмрзЗ
}

class _WishlistCartAppState extends State<WishlistCartApp> {        // State ржХрзНрж▓рж╛рж╕: ржПржЦрж╛ржирзЗ рж╕ржм ржнрзНржпрж╛рж░рж┐рзЯрзЗржмрж▓ ржУ UI рж▓ржЬрж┐ржХ ржерж╛ржХржмрзЗ
  final List<Map<String, dynamic>> _products = [                    // ржкрзНрж░рзЛржбрж╛ржХрзНржЯ рж▓рж┐рж╕рзНржЯ (ржирж╛ржо + ржЖржЗржХржи) тЖТ Grid-ржП ржжрзЗржЦрж╛ржирзЛ рж╣ржмрзЗ
    {'name': 'Laptop', 'icon': Icons.laptop_chromebook},
    {'name': 'Phone', 'icon': Icons.phone_android},
    {'name': 'Headphones', 'icon': Icons.headset},
    {'name': 'Tablet', 'icon': Icons.tablet_mac},
    {'name': 'Watch', 'icon': Icons.watch},
  ];

  final List<Map<String, dynamic>> _cartItems = [];                 // Cart рж▓рж┐рж╕рзНржЯ (drag ржХрж░рж▓рзЗ ржПржЦрж╛ржирзЗ ржпрзЛржЧ рж╣ржмрзЗ)
  final List<Map<String, dynamic>> _wishlistItems = [];             // Wishlist рж▓рж┐рж╕рзНржЯ (drag ржХрж░рж▓рзЗ ржПржЦрж╛ржирзЗ ржпрзЛржЧ рж╣ржмрзЗ)

  bool _isCartHighlighted = false;                                  // Cart drop area hover/highlight state
  bool _isWishlistHighlighted = false;                              // Wishlist drop area hover/highlight state

  mysnk(msg, context) {                                             // Snackbar ржжрзЗржЦрж╛ржирзЛрж░ ржЫрзЛржЯ utility ржлрж╛ржВрж╢ржи
    return ScaffoldMessenger.of(context).showSnackBar(
      SnackBar(content: Text(msg), duration: Duration(seconds: 3)), // рзй рж╕рзЗржХрзЗржирзНржбрзЗрж░ ржирзЛржЯрж┐ржлрж┐ржХрзЗрж╢ржи ржЯрзЛрж╕рзНржЯ
    );
  }

  @override
  Widget build(BuildContext context) {                               // ржкрзБрж░рзЛ рж╕рзНржХрзНрж░рж┐ржирзЗрж░ UI
    return Scaffold(                                                 // Scaffold: AppBar + Body + Snackbar parent
      appBar: AppBar(title: Text("Wishlist & Cart")),               // ржЙржкрж░рзЗрж░ ржЯрж╛ржЗржЯрзЗрж▓ ржмрж╛рж░
      body: Padding(                                                 // Body-ржПрж░ ржЪрж╛рж░ржкрж╛рж╢рзЗ padding
        padding: EdgeInsets.all(16.0),
        child: Column(                                               // ржЙржкрж░рзЗ Products Grid, ржирж┐ржЪрзЗ Cart/Wishlist рж╕рзЗржХрж╢ржи
          crossAxisAlignment: CrossAxisAlignment.stretch,
          children: [
            Text(
              'Available Products',                                  // рж╕рзЗржХрж╢ржи рж╣рзЗржбрж┐ржВ
              style: Theme.of(context).textTheme.titleLarge,
              textAlign: TextAlign.center,
            ),
            const SizedBox(height: 10),                              // ржХрж┐ржЫрзБ рж╕рзНржкрзЗрж╕
            Expanded(
              flex: 2,                                               // ржЙржкрж░рзЗрж░ Grid view-ржХрзЗ ржорзЛржЯ ржЙржЪрзНржЪрждрж╛рж░ 2/5 ржЕржВрж╢ ржжрзЗржмрзЗ
              child: GridView.builder(                               // Products Grid
                itemCount: _products.length,                         // ржорзЛржЯ ржХрждржЯрж╛ ржХрж╛рж░рзНржб ржжрзЗржЦрж╛ржмрзЗ
                gridDelegate: SliverGridDelegateWithFixedCrossAxisCount(
                  crossAxisCount: 3,                                 // ржкрзНрж░рждрж┐ рж▓рж╛ржЗржирзЗ рзйржЯрж╛ ржЖржЗржЯрзЗржо
                  childAspectRatio: 0.9,                             // ржХрж╛рж░рзНржбрзЗрж░ ржЕржирзБржкрж╛ржд (ржЙржЪрзНржЪрждрж╛/ржкрзНрж░рж╕рзНрже)
                  crossAxisSpacing: 8,                               // ржЧрзНрж░рж┐ржб ржХрж▓рж╛ржорзЗрж░ ржлрж╛ржБржХ
                  mainAxisSpacing: 8,                                // ржЧрзНрж░рж┐ржб рж░рзЛ-рж░ ржлрж╛ржБржХ
                ),
                itemBuilder: (context, index) {
                  return _buildProductCard(_products[index]);        // ржкрзНрж░рждрж┐ржЯрж┐ ржкрзНрж░рзЛржбрж╛ржХрзНржЯрзЗрж░ ржЬржирзНржп Draggable ржХрж╛рж░рзНржб
                },
              ),
            ),
            const Divider(height: 30, thickness: 1),                 // ржЙржкрж░рзЗрж░ Grid ржЖрж░ ржирж┐ржЪрзЗрж░ Drop areas ржЖрж▓рж╛ржжрж╛ ржХрж░рзЗ
            Expanded(
              flex: 3,                                               // ржирж┐ржЪрзЗрж░ ржЕржВрж╢ 3/5 ржЙржЪрзНржЪрждрж╛ ржкрж╛ржмрзЗ
              child: ListView(                                       // рж╕рзНржХрзНрж░рж▓ржпрзЛржЧрзНржп ржХрж▓рж╛ржо (Cart + Wishlist)
                children: [
                  _buildDropTarget(                                  // Cart Drop Target
                    title: "Cart",
                    items: _cartItems,                               // Cart-ржП ржерж╛ржХрж╛ ржЖржЗржЯрзЗржоржЧрзБрж▓рзЛрж░ рждрж╛рж▓рж┐ржХрж╛
                    highlightColor: Colors.blue,                     // hover ржХрж░рж▓рзЗ ржирзАрж▓ ржЯрзЛржи
                    isHighlighted: _isCartHighlighted,               // hover state (true рж╣рж▓рзЗ рж░ржЩ ржкрж╛рж▓рзНржЯрж╛ржмрзЗ)
                    icon: Icons.shopping_cart,
                    onAccept: (item) {                               // ржбрзНрж░рзНржпрж╛ржЧржб ржбрзЗржЯрж╛ accept ржХрж░рж╛рж░ рж╕ржорзЯ
                      if (!_cartItems.any((cartItem) =>
                          cartItem['name'] == item['name'])) {       // ржбрзБржкрзНрж▓рж┐ржХрзЗржЯ ржПржирзНржЯрзНрж░рж┐ ржЖржЯржХрж╛ржирзЛ (ржирж╛ржо ржПржХ рж╣рж▓рзЗ ржЖрж░ ржпрзЛржЧ ржХрж░ржмрзЗ ржирж╛)
                        _cartItems.add(item);                         // ржирждрзБржи ржЖржЗржЯрзЗржо Cart-ржП ржпрзЛржЧ
                      }
                    },
                    onEnter: () => setState(() {                     // ржбрзНрж░рзНржпрж╛ржЧ ржПрж░рж┐рзЯрж╛-рждрзЗ ржврзЛржХрж╛рж░ рж╕ржорзЯ highlight ржЕржи
                      _isCartHighlighted = true;
                    }),
                    onLeave: () => setState(() {                     // ржбрзНрж░рзНржпрж╛ржЧ ржПрж░рж┐рзЯрж╛ ржЫрзЗрзЬрзЗ ржЧрзЗрж▓рзЗ highlight ржЕржл
                      _isCartHighlighted = false;
                    }),
                  ),
                  _buildDropTarget(                                  // Wishlist Drop Target
                    title: "Wishlist",
                    items: _wishlistItems,                           // Wishlist-ржП ржерж╛ржХрж╛ ржЖржЗржЯрзЗржо
                    highlightColor: Colors.green,                    // hover ржХрж░рж▓рзЗ рж╕ржмрзБржЬ ржЯрзЛржи
                    isHighlighted: _isWishlistHighlighted,           // hover state
                    icon: Icons.favorite,
                    onAccept: (item) {                               // Wishlist accept
                      if (!_wishlistItems.any((wItem) =>
                          wItem['name'] == item['name'])) {          // ржбрзБржкрзНрж▓рж┐ржХрзЗржЯ ржЖржЯржХрж╛ржирзЛ
                        _wishlistItems.add(item);
                      }
                    },
                    onEnter: () => setState(() {                     // highlight ржЕржи
                      _isWishlistHighlighted = true;
                    }),
                    onLeave: () => setState(() {                     // highlight ржЕржл
                      _isWishlistHighlighted = false;
                    }),
                  ),
                ],
              ),
            ),
          ],
        ),
      ),
    );
  }

  // Draggable Product Card: ржЧрзНрж░рж┐ржбрзЗ ржпрзЗ ржХрж╛рж░рзНржб ржжрзЗржЦржЫ, рж╕рзЗржЯрж┐ ржбрзНрж░рзНржпрж╛ржЧ ржХрж░рж╛ ржпрж╛ржмрзЗ
  Widget _buildProductCard(Map<String, dynamic> product) {
    return Draggable<Map<String, dynamic>>(                         // Draggable: ржпрж╛ржХрзЗ ржзрж░рзЗ ржЯрзЗржирзЗ ржирзЗржУрзЯрж╛ ржпрж╛рзЯ
      data: product,                                                // ржЯрзЗржирзЗ ржирзЗржУрзЯрж╛рж░ рж╕рж╛ржерзЗ ржпрзЗ ржбрзЗржЯрж╛ ржпрж╛ржмрзЗ (name, icon)
      feedback: Material(                                           // ржбрзНрж░рзНржпрж╛ржЧрж┐ржВ-ржПрж░ рж╕ржорзЯ ржнрж╛рж╕ржорж╛ржи UI (overlay widget)
        elevation: 4,
        child: _buildProductUI(product, isDragging: true),          // ржбрзНрж░рзНржпрж╛ржЧ ржЕржмрж╕рзНржерж╛рж░ ржЬржирзНржп ржЖрж▓рж╛ржжрж╛ рж▓рзБржХ
      ),
      childWhenDragging: _buildProductUI(product, isDragging: true), // ржЖрж╕рж▓ ржЬрж╛рзЯржЧрж╛рзЯ ржХрзЗржоржи ржжрзЗржЦрж╛ржмрзЗ ржпржЦржи ржЯрж╛ржирж╛ рж╣ржЪрзНржЫрзЗ (ржбрж┐ржоржб)
      child: _buildProductUI(product),                              // ржирж░ржорж╛рж▓ ржЕржмрж╕рзНржерж╛рзЯ ржХрж╛рж░рзНржб UI
    );
  }

  // Product Card UI: ржПржХржЗ ржХрж╛рж░рзНржб UI, рж╢рзБржзрзБ ржбрзНрж░рзНржпрж╛ржЧрж┐ржВ рж╣рж▓рзЗ ржХрж┐ржЫрзБ рж╕рзНржЯрж╛ржЗрж▓ ржкрж╛рж▓рзНржЯрж╛рзЯ
  Widget _buildProductUI(Map<String, dynamic> product, {bool isDragging = false}) {
    return Card(
      elevation: isDragging ? 0 : 4,                                // ржбрзНрж░рзНржпрж╛ржЧрж┐ржВ рж╣рж▓рзЗ elevation ржХржо
      color: isDragging ? Colors.yellowAccent.withOpacity(0.3) : null, // ржбрзНрж░рзНржпрж╛ржЧрж┐ржВ рж╣рж▓рзЗ рж╣рж╛рж▓ржХрж╛ рж╣рж▓рзБржж tint
      margin: EdgeInsets.all(8),
      child: Padding(
        padding: EdgeInsets.all(12.0),
        child: Column(
          mainAxisSize: MainAxisSize.min,
          children: [
            Icon(product['icon'], size: 32),                         // ржкрзНрж░рзЛржбрж╛ржХрзНржЯ ржЖржЗржХржи
            SizedBox(height: 8),
            Text(product['name'], style: TextStyle(fontSize: 16)),   // ржкрзНрж░рзЛржбрж╛ржХрзНржЯ ржирж╛ржо
          ],
        ),
      ),
    );
  }

  // Drop Target Widget: Cart/Wishlist тАФ ржпрзЗржЦрж╛ржирзЗ ржбрзНрж░рзНржпрж╛ржЧ ржХрж░рзЗ ржлрзЗрж▓рж╛ рж╣ржмрзЗ
  Widget _buildDropTarget({
    required String title,                                          // рж╣рзЗржбрж┐ржВ: "Cart" ржмрж╛ "Wishlist"
    required List<Map<String, dynamic>> items,                      // рж╕ржВрж╢рзНрж▓рж┐рж╖рзНржЯ рж▓рж┐рж╕рзНржЯ (Cart/Wishlist)
    required Color highlightColor,                                  // hover color
    required bool isHighlighted,                                    // hover state
    required IconData icon,                                         // рж╣рзЗржбрж┐ржВ ржЖржЗржХржи
    required Function(Map<String, dynamic>) onAccept,               // ржбрзНрж░ржк ржХрж░рж╛рж░ ржкрж░рзЗ ржХрж┐ ржХрж░ржмрзЗ (рж▓рж┐рж╕рзНржЯрзЗ ржпрзЛржЧ)
    required VoidCallback onEnter,                                  // hover рж╢рзБрж░рзБ рж╣рж▓рзЗ ржХрж┐ ржХрж░ржмрзЗ (highlight ржЕржи)
    required VoidCallback onLeave,                                  // hover ржЫрж╛рзЬрж▓рзЗ ржХрж┐ ржХрж░ржмрзЗ (highlight ржЕржл)
  }) {
    return DragTarget<Map<String, dynamic>>(                        // DragTarget: ржбрзНрж░ржк рж░рж┐рж╕рж┐ржнрж╛рж░
      builder: (context, candidateData, rejectedData) {             // UI ржХрзЗржоржи рж╣ржмрзЗ (candidateData ржорж╛ржирзЗ ржмрж░рзНрждржорж╛ржирзЗ hover ржХрж░рж╛ ржЖржЗржЯрзЗржо)
        return Container(
          margin: EdgeInsets.symmetric(vertical: 10.0),
          padding: EdgeInsets.all(16.00),
          width: double.infinity,
          decoration: BoxDecoration(
            color: isHighlighted                                     // hover рж╣рж▓рзЗ ржмрзНржпрж╛ржХржЧрзНрж░рж╛ржЙржирзНржб рж╣рж╛рж▓ржХрж╛ highlight
                ? highlightColor.withOpacity(0.2)
                : Colors.grey.shade200,
            borderRadius: BorderRadius.circular(12),
            border: Border.all(
              color: isHighlighted ? highlightColor : Colors.grey,  // hover рж╣рж▓рзЗ ржмрж░рзНржбрж╛рж░ рж░ржЩ highlightColor
              width: 2,
            ),
          ),
          child: Column(
            children: [
              Icon(                                                  // ржЙржкрж░рзЗ ржЖржЗржХржи (Cart/Favorite)
                icon,
                size: 30,
                color: isHighlighted ? highlightColor : Colors.grey.shade700,
              ),
              SizedBox(height: 10),
              Text(
                title,                                               // "Cart" / "Wishlist" рж╢рж┐рж░рзЛржирж╛ржо
                style: TextStyle(fontSize: 18, fontWeight: FontWeight.bold),
              ),
              SizedBox(height: 10),
              items.isEmpty                                          // ржпржжрж┐ рж▓рж┐рж╕рзНржЯ ржЦрж╛рж▓рж┐ рж╣рзЯ: hint ржЯрзЗржХрзНрж╕ржЯ
                  ? Text(
                      'Drag items here to add to $title',
                      style: TextStyle(color: Colors.grey.shade600),
                    )
                  : Wrap(                                            // ржпржжрж┐ ржЖржЗржЯрзЗржо ржерж╛ржХрзЗ: рж╕рзЗржЧрзБрж▓рзЛ Chip ржЖржХрж╛рж░рзЗ ржжрзЗржЦрж╛ржмрзЗ
                      spacing: 8,
                      runSpacing: 4,
                      children: items
                          .map(
                            (item) => Chip(                          // ржкрзНрж░рждрж┐ржЯрж┐ ржЖржЗржЯрзЗржоржХрзЗ Chip ржмрж╛ржирж╛ржирзЛ
                              avatar: Icon(item['icon'] as IconData, size: 18),
                              label: Text(item['name'] as String),
                              backgroundColor: highlightColor.withOpacity(0.1),
                              labelStyle: TextStyle(color: highlightColor),
                            ),
                          )
                          .toList(),
                    ),
            ],
          ),
        );
      },
      onWillAccept: (data) {                                         // ржбрзНрж░рзНржпрж╛ржЧ ржЖржЗржЯрзЗржо ржПрж░рж┐рзЯрж╛рждрзЗ ржврзБржХрж▓рзЗржЗ ржЯрзНрж░рж┐ржЧрж╛рж░
        onEnter();                                                    // highlight ржЕржи ржХрж░рзЛ (setState ржХрж▓ рж╣рзЯ ржХрж▓ржмрзНржпрж╛ржХрзЗрж░ ржнрж┐рждрж░рзЗ)
        return true;                                                  // true ржжрж┐рж▓рзЗ ржбрзНрж░ржк ржЧрзНрж░рж╣ржгржпрзЛржЧрзНржп
      },
      onAccept: (data) {                                              // ржбрзНрж░ржк рж╣рж▓рзЗржЗ ржЯрзНрж░рж┐ржЧрж╛рж░
        setState(() {                                                 // state ржкрж░рж┐ржмрж░рзНрждржи тЖТ UI рж░рж┐ржмрж┐рж▓рзНржб
          onAccept(data);                                             // рж▓рж┐рж╕рзНржЯрзЗ ржЖржЗржЯрзЗржо ржпрзЛржЧ (ржбрзБржкрзНрж▓рж┐ржХрзЗржЯ ржЪрзЗржХрж╕рж╣)
          onLeave();                                                  // ржбрзНрж░ржкрзЗрж░ ржкрж░ highlight ржЕржл
        });
        mysnk('${data['name']} added to $title', context);            // Snackbar: тАЬLaptop added to CartтАЭ
      },
      onLeave: (data) {                                               // ржбрзНрж░рзНржпрж╛ржЧ ржЖржЗржЯрзЗржо ржПрж░рж┐рзЯрж╛ ржерзЗржХрзЗ ржмрзЗрж░ рж╣рж▓рзЗржЗ
        onLeave();                                                    // highlight ржмржирзНржз
      },
    );
  }
}

,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,

ЁЯза ржПржЗ ржкрзНрж░рзЛржЬрзЗржХрзНржЯрзЗ ржХрзА ржХрж░рж╛ рж╣рзЯрзЗржЫрзЗ? (рж╕ржВржХрзНрж╖рж┐ржкрзНржд рж╕рж╛рж░рж╛ржВрж╢)

Drag & Drop UI ржмрж╛ржирж╛ржирзЛ рж╣рзЯрзЗржЫрзЗ ржпрзЗржЦрж╛ржирзЗ ржЙржкрж░рзЗрж░ Grid ржерзЗржХрзЗ ржкрзНрж░рзЛржбрж╛ржХрзНржЯ ржХрж╛рж░рзНржбржЧрзБрж▓рзЛ ржЯрзЗржирзЗ ржирж┐ржЪрзЗрж░ Cart ржмрж╛ Wishlist-ржП ржлрзЗрж▓рж╛ ржпрж╛рзЯред
ржбрзНрж░рзНржпрж╛ржЧ ржХрж░рж╛рж░ рж╕ржорзЯ Drop area highlight рж╣рзЯ (visual feedback), ржЖрж░ ржбрзНрж░ржк рж╣рж▓рзЗ Snackbar ржорзЗрж╕рзЗржЬ ржжрзЗржЦрж╛рзЯред
ржПржХржЗ ржЖржЗржЯрзЗржо ржжрзБржЗржмрж╛рж░ ржирж╛ ржпрзЛржЧ рж╣рзЯтАФржПржЬржирзНржп ржбрзБржкрзНрж▓рж┐ржХрзЗржЯ ржЪрзЗржХ ржЖржЫрзЗред
ржкрзНрж░рждрж┐ржЯрж┐ Drop area-рждрзЗ ржпрзЛржЧ рж╣ржУрзЯрж╛ ржЖржЗржЯрзЗржоржЧрзБрж▓рзЛ Chip рж╣рж┐рж╕рзЗржмрзЗ ржжрзЗржЦрж╛рзЯ (ржЖржЗржХржи + ржирж╛ржо)ред
setState ржмрзНржпржмрж╣рж╛рж░ ржХрж░рзЗ ржпржЦржиржЗ ржЖржЗржЯрзЗржо ржпрзЛржЧ/рж╣рж╛ржЗрж▓рж╛ржЗржЯ ржЕржи-ржЕржл рж╣рзЯ, UI rebuild рж╣рзЯрзЗ ржирждрзБржи ржЕржмрж╕рзНржерж╛ ржжрзЗржЦрж╛рзЯред

тЪЩя╕П ржПржЗ ржХрзЛржб рж▓рзЗржЦрж╛рж░ ржкрзНрж░ржнрж╛ржм/ржлрж▓рж╛ржлрж▓

User Experience: ржбрзНрж░рзНржпрж╛ржЧ-ржбрзНрж░ржк + рж╣рж╛ржЗрж▓рж╛ржЗржЯ + Snackbar тЖТ ржЦрзБржм рж╕рзНржорзБрже ржЗржирзНржЯрж╛рж░тАМрзНржпрж╛ржХрж╢ржиред
State Management: рж▓рзЛржХрж╛рж▓ рж╕рзНржЯрзЗржЯ (setState) ржжрж┐рзЯрзЗржЗ ржХрж╛ржЬ рж╕ржорж╛ржзрж╛ржи; ржЫрзЛржЯ ржлрж┐ржЪрж╛рж░рзЗрж░ ржЬржирзНржп ржпржерзЗрж╖рзНржЯред
Performance: рж▓рж┐рж╕рзНржЯ ржЫрзЛржЯ ржмрж▓рзЗ рж╕ржорж╕рзНржпрж╛ ржирзЗржЗ; ржмрзЬ ржбрзЗржЯрж╛рж░ ржЬржирзНржп ListView.builder, state lift-up ржмрж╛ state management (Provider/Bloc) ржнрж╛ржмрж╛ ржпрзЗрждрзЗ ржкрж╛рж░рзЗред
Data Integrity: ржбрзБржкрзНрж▓рж┐ржХрзЗржЯ ржпрзЛржЧ ржмржирзНржз рж░рж╛ржЦрж╛рзЯ рждрж╛рж▓рж┐ржХрж╛ ржкрж░рж┐рж╖рзНржХрж╛рж░ ржерж╛ржХрзЗред
Reusability: _buildDropTarget() ржУ _buildProductCard() ржЖрж▓рж╛ржжрж╛ ржлрж╛ржВрж╢ржитАФржкрж░рзЗ ржЪрж╛ржЗрж▓рзЗ ржЕржирзНржп ржкрзЗржЬ/ржкрзНрж░ржЬрзЗржХрзНржЯрзЗржУ ржмрзНржпржмрж╣рж╛рж░ ржХрж░рж╛ ржпрж╛ржмрзЗред

ржХрзЛржбрзЗрж░ рж╕ржВржХрзНрж╖рж┐ржкрзНржд ржмрж░рзНржгржирж╛
ржПржЗ ржлрзНрж▓рж╛ржЯрж╛рж░ ржХрзЛржбржЯрж┐ ржПржХржЯрж┐ ржЗржирзНржЯрж╛рж░рзЗржХрзНржЯрж┐ржн ржЙржЗрж╢рж▓рж┐рж╕рзНржЯ ржПржмржВ ржХрж╛рж░рзНржЯ ржЕрзНржпрж╛ржкрзНрж▓рж┐ржХрзЗрж╢ржи рждрзИрж░рж┐ ржХрж░рзЗ ржпрзЗржЦрж╛ржирзЗ ржмрзНржпржмрж╣рж╛рж░ржХрж╛рж░рзАрж░рж╛ ржкржгрзНржпржЧрзБрж▓рж┐ржХрзЗ ржбрзНрж░рзНржпрж╛ржЧ ржЕрзНржпрж╛ржирзНржб ржбрзНрж░ржк ржХрж░рзЗ ржЙржЗрж╢рж▓рж┐рж╕рзНржЯ ржмрж╛ ржХрж╛рж░рзНржЯрзЗ ржпрзЛржЧ ржХрж░рждрзЗ ржкрж╛рж░рзЗржиред ржЕрзНржпрж╛ржкржЯрж┐рждрзЗ ржирж┐ржорзНржирж▓рж┐ржЦрж┐ржд ржорзВрж▓ ржмрзИрж╢рж┐рж╖рзНржЯрзНржп рж░ржпрж╝рзЗржЫрзЗ:

ржорзВрж▓ ржХрж╛рж░рзНржпржХрж╛рж░рж┐рждрж╛:
ржкржгрзНржп ржкрзНрж░ржжрж░рзНрж╢ржи: ржПржХржЯрж┐ ржЧрзНрж░рж┐ржб рж▓рзЗржЖржЙржЯрзЗ рзлржЯрж┐ ржнрж┐ржирзНржи ржкржгрзНржп (рж▓рзНржпрж╛ржкржЯржк, ржлрзЛржи, рж╣рзЗржбржлрзЛржи, ржЯрзНржпрж╛ржмрж▓рзЗржЯ, ржШржбрж╝рж┐) ржкрзНрж░ржжрж░рзНрж╢рж┐ржд рж╣ржпрж╝, ржкрзНрж░рждрж┐ржЯрж┐рж░ ржирж┐ржЬрж╕рзНржм ржЖржЗржХржи ржПржмржВ ржирж╛ржо рж╕рж╣ред
ржбрзНрж░рзНржпрж╛ржЧ ржЕрзНржпрж╛ржирзНржб ржбрзНрж░ржк: ржмрзНржпржмрж╣рж╛рж░ржХрж╛рж░рзАрж░рж╛ ржпрзЗржХрзЛржирзЛ ржкржгрзНржпржХрзЗ ржбрзНрж░рзНржпрж╛ржЧ ржХрж░рзЗ ржХрж╛рж░рзНржЯ ржмрж╛ ржЙржЗрж╢рж▓рж┐рж╕рзНржЯрзЗ ржирж┐ржпрж╝рзЗ ржпрзЗрждрзЗ ржкрж╛рж░рзЗржиред
ржнрж┐ржЬрзНржпрзБржпрж╝рж╛рж▓ ржлрж┐ржбржмрзНржпрж╛ржХ:
ржбрзНрж░рзНржпрж╛ржЧ ржХрж░рж╛рж░ рж╕ржоржпрж╝ ржкржгрзНржпржЯрж┐рж░ ржЪрзЗрж╣рж╛рж░рж╛ ржкрж░рж┐ржмрж░рзНрждрж┐ржд рж╣ржпрж╝ (рж╣рж╛рж▓ржХрж╛ рж╣рж▓рзБржж ржмрзНржпрж╛ржХржЧрзНрж░рж╛ржЙржирзНржб)ред
ржХрж╛рж░рзНржЯ ржмрж╛ ржЙржЗрж╢рж▓рж┐рж╕рзНржЯ ржПрж▓рж╛ржХрж╛ржпрж╝ ржкржгрзНржп ржирж┐ржпрж╝рзЗ ржЧрзЗрж▓рзЗ рж╕рзЗржЗ ржПрж▓рж╛ржХрж╛ рж╣рж╛ржЗрж▓рж╛ржЗржЯ рж╣ржпрж╝ (ржХрж╛рж░рзНржЯ: ржирзАрж▓, ржЙржЗрж╢рж▓рж┐рж╕рзНржЯ: рж╕ржмрзБржЬ)ред
ржбрзБржкрзНрж▓рж┐ржХрзЗрж╢ржи ржкрзНрж░рждрж┐рж░рзЛржз: ржПржХржЗ ржкржгрзНржп ржПржХрж╛ржзрж┐ржХржмрж╛рж░ ржХрж╛рж░рзНржЯ ржмрж╛ ржЙржЗрж╢рж▓рж┐рж╕рзНржЯрзЗ ржпрзЛржЧ ржХрж░рж╛ ржпрж╛ржпрж╝ ржирж╛ред
рж╕рзНржирзНржпрж╛ржХржмрж╛рж░ ржирзЛржЯрж┐ржлрж┐ржХрзЗрж╢ржи: ржкржгрзНржп рж╕ржлрж▓ржнрж╛ржмрзЗ ржпрзЛржЧ ржХрж░рж╛рж░ ржкрж░ ржПржХржЯрж┐ ржирзЛржЯрж┐ржлрж┐ржХрзЗрж╢ржи ржжрзЗржЦрж╛ржпрж╝ред
ржЖржЗржЯрзЗржо ржкрзНрж░ржжрж░рзНрж╢ржи: ржХрж╛рж░рзНржЯ ржПржмржВ ржЙржЗрж╢рж▓рж┐рж╕рзНржЯрзЗ ржпрзЛржЧ ржХрж░рж╛ ржЖржЗржЯрзЗржоржЧрзБрж▓рж┐ ржЪрж┐ржк ржЖржХрж╛рж░рзЗ ржкрзНрж░ржжрж░рзНрж╢рж┐ржд рж╣ржпрж╝, ржпрж╛рждрзЗ ржкржгрзНржпрзЗрж░ ржЖржЗржХржи ржПржмржВ ржирж╛ржо ржерж╛ржХрзЗред
ржХрж╛рж░рж┐ржЧрж░рж┐ ржмрж╛рж╕рзНрждржмрж╛ржпрж╝ржи:
StatefulWidget: ржЕрзНржпрж╛ржкрзЗрж░ ржЕржмрж╕рзНржерж╛ (ржХрж╛рж░рзНржЯ ржПржмржВ ржЙржЗрж╢рж▓рж┐рж╕рзНржЯрзЗ ржЖржЗржЯрзЗржо) ржкрж░рж┐ржмрж░рзНрждржирзЗрж░ ржЬржирзНржп ржмрзНржпржмрж╣рзГржд рж╣ржпрж╝рзЗржЫрзЗред
Draggable ржПржмржВ DragTarget: ржбрзНрж░рзНржпрж╛ржЧ ржЕрзНржпрж╛ржирзНржб ржбрзНрж░ржк ржХрж╛рж░рзНржпржХрж╛рж░рж┐рждрж╛ ржмрж╛рж╕рзНрждржмрж╛ржпрж╝ржирзЗрж░ ржЬржирзНржп ржмрзНржпржмрж╣рзГржд рж╣ржпрж╝рзЗржЫрзЗред
GridView.builder: ржкржгрзНржпржЧрзБрж▓рж┐ржХрзЗ ржЧрзНрж░рж┐ржб ржЖржХрж╛рж░рзЗ ржкрзНрж░ржжрж░рзНрж╢ржи ржХрж░рждрзЗ ржмрзНржпржмрж╣рзГржд рж╣ржпрж╝рзЗржЫрзЗред
ListView: ржХрж╛рж░рзНржЯ ржПржмржВ ржЙржЗрж╢рж▓рж┐рж╕рзНржЯ ржПрж▓рж╛ржХрж╛ рждрзИрж░рж┐ ржХрж░рждрзЗ ржмрзНржпржмрж╣рзГржд рж╣ржпрж╝рзЗржЫрзЗред
setState(): UI ржЖржкржбрзЗржЯ ржХрж░рждрзЗ ржмрзНржпржмрж╣рзГржд рж╣ржпрж╝рзЗржЫрзЗ ржпржЦржи ржХрзЛржирзЛ ржЖржЗржЯрзЗржо ржпрзЛржЧ ржХрж░рж╛ рж╣ржпрж╝ ржмрж╛ рж╣рж╛ржЗрж▓рж╛ржЗржЯ рж╕рзНржЯрзЗржЯ ржкрж░рж┐ржмрж░рзНрждрж┐ржд рж╣ржпрж╝ред
ржХрзЛржбрзЗрж░ ржкрзНрж░ржнрж╛ржм:
ржПржЗ ржХрзЛржбржЯрж┐ ржЪрж╛рж▓рж╛ржирзЛрж░ ржлрж▓рзЗ ржмрзНржпржмрж╣рж╛рж░ржХрж╛рж░рзАрж░рж╛ ржПржХржЯрж┐ ржЗржирзНржЯрж╛рж░рзЗржХрзНржЯрж┐ржн рж╢ржкрж┐ржВ ржЗржирзНржЯрж╛рж░ржлрзЗрж╕ ржкрж╛ржмрзЗржи ржпрзЗржЦрж╛ржирзЗ рждрж╛рж░рж╛:

рж╕рж╣ржЬрзЗржЗ ржкржгрзНржп ржирж┐рж░рзНржмрж╛ржЪржи ржХрж░рждрзЗ ржкрж╛рж░ржмрзЗржи
ржкржЫржирзНржжрзЗрж░ ржкржгрзНржпржЧрзБрж▓рж┐ ржЙржЗрж╢рж▓рж┐рж╕рзНржЯрзЗ рж╕ржВрж░ржХрзНрж╖ржг ржХрж░рждрзЗ ржкрж╛рж░ржмрзЗржи
ржХрж┐ржирждрзЗ ржЪрж╛ржУржпрж╝рж╛ ржкржгрзНржпржЧрзБрж▓рж┐ ржХрж╛рж░рзНржЯрзЗ ржпрзЛржЧ ржХрж░рждрзЗ ржкрж╛рж░ржмрзЗржи
ржнрж┐ржЬрзНржпрзБржпрж╝рж╛рж▓ ржлрж┐ржбржмрзНржпрж╛ржХрзЗрж░ ржорж╛ржзрзНржпржорзЗ ржмрзБржЭрждрзЗ ржкрж╛рж░ржмрзЗржи ржХрзЛржи ржкржгрзНржпржЯрж┐ ржХрзЛржерж╛ржпрж╝ ржпрзЛржЧ ржХрж░рж╛ рж╣ржЪрзНржЫрзЗ
ржбрзБржкрзНрж▓рж┐ржХрзЗрж╢ржи ржПржбрж╝рж╛рждрзЗ ржкрж╛рж░ржмрзЗржи
ржПржЯрж┐ ржЗ-ржХржорж╛рж░рзНрж╕ ржЕрзНржпрж╛ржкрзНрж▓рж┐ржХрзЗрж╢ржиржЧрзБрж▓рж┐рж░ ржЬржирзНржп ржПржХржЯрж┐ ржЧрзБрж░рзБрждрзНржмржкрзВрж░рзНржг ржлрж┐ржЪрж╛рж░ ржпрж╛ ржмрзНржпржмрж╣рж╛рж░ржХрж╛рж░рзА ржЕржнрж┐ржЬрзНржЮрждрж╛ ржЙржирзНржиржд ржХрж░рзЗ ржПржмржВ ржХрзЗржирж╛ржХрж╛ржЯрж╛рж░ ржкрзНрж░ржХрзНрж░рж┐ржпрж╝рж╛ржХрзЗ рж╕рж╣ржЬ ржХрж░рзЗ рждрзЛрж▓рзЗред

...............................................................................
ржЯрзЗрж╕рзНржЯ ржХрзБржЗржЬ
ржЪржорзОржХрж╛рж░ ржПржЗ ржХрж╛ржЬрзЗрж░ ржкрж░, ржПржмрж╛рж░ рждрзЛржорж╛рж░ ржЬрзНржЮрж╛ржи ржпрж╛ржЪрж╛ржЗрзЯрзЗрж░ ржкрж╛рж▓рж╛ред

ржкрзНрж░рж╢рзНржи рзз: Draggable<T> ржПржмржВ DragTarget<T>-ржПрж░ ржоржзрзНржпрзЗ <T> (Generic Type) ржмрзНржпржмрж╣рж╛рж░ ржХрж░рж╛ ржПржд ржЧрзБрж░рзБрждрзНржмржкрзВрж░рзНржг ржХрзЗржи? ржпржжрж┐ Draggable<Color>-ржХрзЗ ржПржХржЯрж┐ DragTarget<String>-ржПрж░ ржУржкрж░ ржбрзНрж░ржк ржХрж░рж╛ рж╣рзЯ, рждрж╛рж╣рж▓рзЗ ржХрзА ржШржЯржмрзЗ?

ржкрзНрж░рж╢рзНржи рзи: Draggable ржЙржЗржЬрзЗржЯрзЗрж░ child ржПржмржВ feedback ржкрзНрж░рзЛржкрж╛рж░рзНржЯрж┐рж░ ржоржзрзНржпрзЗ ржорзВрж▓ ржкрж╛рж░рзНржержХрзНржп ржХрзА?

ржкрзНрж░рж╢рзНржи рзй: ржПржХржЯрж┐ ржЖржЗржЯрзЗржо рж╕ржлрж▓ржнрж╛ржмрзЗ ржбрзНрж░ржк рж╣ржУрзЯрж╛рж░ ржкрж░ ржорзВрж▓ ржХрж╛ржЬржЯрж┐ (ржпрзЗржоржи рж▓рж┐рж╕рзНржЯрзЗ ржЖржЗржЯрзЗржо ржпрзЛржЧ ржХрж░рж╛) DragTarget-ржПрж░ ржХрзЛржи ржХрж▓ржмрзНржпрж╛ржХ ржлрж╛ржВрж╢ржирзЗ рж▓рзЗржЦрж╛ рж╣рзЯ? ржЖрж░ ржбрзНрж░ржк ржХрж░рж╛рж░ ржЖржЧрзЗржЗ ржЖржЗржЯрзЗржоржЯрж┐ ржЧрзНрж░рж╣ржг ржХрж░рж╛ ржпрж╛ржмрзЗ ржХрж┐ржирж╛, рж╕рзЗржЗ рж╕рж┐ржжрзНржзрж╛ржирзНржд ржХрзЛржи ржлрж╛ржВрж╢ржирзЗ ржирзЗржУрзЯрж╛ рж╣рзЯ?


;;;;;;;;;;
 ржкрзНрж░рж╢рзНржи рзз

Draggable<T> ржПржмржВ DragTarget<T>-ржП <T> ржХрзЗржи ржжрж░ржХрж╛рж░?

<T> рж╣ржЪрзНржЫрзЗ Generic Type, ржпрзЗржЯрж╛ ржбрзНрж░рзНржпрж╛ржЧ ржХрж░рж╛ ржбрзЗржЯрж╛рж░ ржЯрж╛ржЗржк ржарж┐ржХ ржХрж░рзЗред

ржзрж░рзЛ рждрзБржорж┐ Draggable<String> ржмрзНржпржмрж╣рж╛рж░ ржХрж░ржЫрзЛ тЖТ рждрж╛рж╣рж▓рзЗ рж╕рзЗржЗ Draggable ржХрзЗржмрж▓ String ржбрзЗржЯрж╛ ржмрж╣ржи ржХрж░ржмрзЗред

ржПржХржЗржнрж╛ржмрзЗ DragTarget<String> ржХрзЗржмрж▓ String ржЯрж╛ржЗржкрзЗрж░ ржбрзЗржЯрж╛ ржЧрзНрж░рж╣ржг ржХрж░ржмрзЗред

ЁЯСЙ ржпржжрж┐ рждрзБржорж┐ ржнрзБрж▓ ржХрж░рзЛ тАФ ржпрзЗржоржи Draggable<Color> ржХрзЗ DragTarget<String>-ржП ржбрзНрж░ржк ржХрж░рзЛ,
рждрж╛рж╣рж▓рзЗ ржХрзЛржирзЛ ржорзНржпрж╛ржЪ рж╣ржмрзЗ ржирж╛ тЖТ onWillAccept ржУ onAccept ржПржХрзНрж╕рж┐ржХрж┐ржЙржЯ рж╣ржмрзЗ ржирж╛ред
ржорж╛ржирзЗ, ржбрзНрж░рзНржпрж╛ржЧ ржарж┐ржХржЗ рж╣ржмрзЗ, ржХрж┐ржирзНрждрзБ ржбрзНрж░ржк рж╣ржмрзЗ ржирж╛ред

 ржкрзНрж░рж╢рзНржи рзи

Draggable ржПрж░ child vs feedback

child тЖТ рж╕рзНржХрзНрж░рж┐ржирзЗ ржпрзЗржЯрж╛ рж╕рзНржмрж╛ржнрж╛ржмрж┐ржХ ржЕржмрж╕рзНржерж╛рзЯ ржжрзЗржЦрж╛ ржпрж╛рзЯред
(ржпрзЗржоржи: ржПржХржЯрж┐ Chip "Buy groceries")

feedback тЖТ ржбрзНрж░рзНржпрж╛ржЧ ржХрж░рж╛рж░ рж╕ржорзЯ ржЗржЙржЬрж╛рж░рзЗрж░ ржЖржЩрзБрж▓/ржХрж╛рж░рзНрж╕рж░рзЗрж░ ржирж┐ржЪрзЗ ржпрзЗржЯрж╛ ржнрзЗрж╕рзЗ ржмрзЗрзЬрж╛рзЯред
(ржЕften ржПржХржЗ Chip, ржХрж┐ржирзНрждрзБ рждрзБржорж┐ ржЪрж╛ржЗрж▓рзЗ ржПржЯрж╛ржХрзЗ ржмрзЬ, ржЕрж░рзНржзрзЗржХ ржЯрзНрж░рж╛ржирзНрж╕ржкрж╛рж░рзЗржирзНржЯ ржмрж╛ ржЕржирзНржп рж░ржЩрзЗ ржХрж░рждрзЗ ржкрж╛рж░рзЛ)

ЁЯСЙ рждрж╛ржЗ child = ржЖрж╕рж▓ ржЬрж╛рзЯржЧрж╛рзЯ ржжрзГрж╢рзНржпржорж╛ржи ржЙржЗржЬрзЗржЯ,
ржЖрж░ feedback = ржбрзНрж░рзНржпрж╛ржЧ ржХрж░рж╛рж░ рж╕ржорзЯ ржЪрж▓ржорж╛ржи ржЙржЗржЬрзЗржЯред

 ржкрзНрж░рж╢рзНржи рзй

ржбрзНрж░ржк рж╣ржУрзЯрж╛рж░ ржкрж░ ржорзВрж▓ ржХрж╛ржЬ DragTarget-ржПрж░ ржХрзЛржи ржХрж▓ржмрзНржпрж╛ржХрзЗ рж╣рзЯ?

 ржбрзНрж░ржк рж╣ржУрзЯрж╛рж░ ржкрж░ ржХрж╛ржЬ рж╣рзЯ тЖТ onAccept
(ржПржЦрж╛ржирзЗржЗ рждрзБржорж┐ рж▓рж┐рж╕рзНржЯрзЗ ржЖржЗржЯрзЗржо ржпрзЛржЧ ржХрж░ржмрзЗ ржмрж╛ ржЖржкржбрзЗржЯ ржХрж░ржмрзЗ)ред

ржбрзНрж░ржк ржХрж░рж╛рж░ ржЖржЧрзЗржЗ ржЕржирзБржорждрж┐ ржжрзЗржУрзЯрж╛рж░ ржХрж╛ржЬ ржХрзЛржи ржлрж╛ржВрж╢ржирзЗ рж╣рзЯ?

 рж╕рзЗржЯрж╛ рж╣рзЯ тЖТ onWillAccept
(ржПржЦрж╛ржирзЗ рждрзБржорж┐ ржЪрзЗржХ ржХрж░рждрзЗ ржкрж╛рж░рзЛ ржбрзЗржЯрж╛ ржарж┐ржХ ржЖржЫрзЗ ржХрж┐ ржирж╛, рждрж╛рж░ржкрж░ true/false рж░рж┐ржЯрж╛рж░рзНржи ржХрж░ржмрзЗ)ред

ЁЯФО рж╕ржВржХрзНрж╖рзЗржкрзЗ ржЙрждрзНрждрж░ржЧрзБрж▓рзЛ

<T> ржЯрж╛ржЗржк ржорзНржпрж╛ржЪрж┐ржВ ржирж┐рж╢рзНржЪрж┐ржд ржХрж░рзЗ; ржЯрж╛ржЗржк ржорзЗрж▓рзЗржирж┐ тЖТ ржбрзНрж░ржк рж╣ржмрзЗ ржирж╛ред

child = рж╕рзНржерж┐рж░ ржЙржЗржЬрзЗржЯ, feedback = ржбрзНрж░рзНржпрж╛ржЧ ржЪрж▓рж╛ржХрж╛рж▓рзЗ ржнрзЗрж╕рзЗ ржмрзЗрзЬрж╛ржирзЛ ржЙржЗржЬрзЗржЯред

ржбрзНрж░ржкрзЗрж░ ржкрж░ ржХрж╛ржЬ тЖТ onAccept, ржбрзНрж░ржкрзЗрж░ ржЖржЧрзЗ ржЕржирзБржорждрж┐ тЖТ onWillAcceptред