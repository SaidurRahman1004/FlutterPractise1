ЁЯФС Step 7.4 тАУ Keys in Flutter
1я╕ПтГг Keys ржХрзА? (Definition)

ЁЯСЙ Key рж╣рж▓рзЛ ржПржХржЯрж┐ unique identifier (ржкрж░рж┐ржЪрзЯ) ржпрж╛ Flutter ржХрзЗ ржмрж▓рзЗ ржжрзЗрзЯ ржХрзЛржи Widget ржЖржЧрзЗрж░ржЯрж╛рж░ рж╕рж╛ржерзЗ ржорж┐рж▓ржмрзЗ ржЖрж░ ржХрзЛржиржЯрж╛ ржирждрзБржи рждрзИрж░рж┐ рж╣ржмрзЗред
ржпржЦржи UI rebuild рж╣рзЯ (setState ржмрж╛ state change ржП) Flutter ржирждрзБржи widget tree рждрзИрж░рж┐ ржХрж░рзЗ тЖТ Flutter ржЪрзЗржХ ржХрж░рзЗ Widget ржЧрзБрж▓рзЛ ржХрж┐ ржПржХржЗ ржирж╛ржХрж┐ ржирждрзБржи?

ржпржжрж┐ Key ржирж╛ ржерж╛ржХрзЗ тЖТ Flutter ржХржЦржирзЛ ржХржЦржирзЛ Widget-ржХрзЗ ржирждрзБржи ржоржирзЗ ржХрж░рзЗ тЖТ state reset рж╣рзЯрзЗ ржпрж╛рзЯ тЭМ

ржпржжрж┐ Key ржерж╛ржХрзЗ тЖТ Flutter ржмрзБржЭрзЗ ржирзЗрзЯ ржЖржЧрзЗрж░ Widget-ржЗ ржПржЯрж╛, рж╢рзБржзрзБ state ржЖржкржбрзЗржЯ ржХрж░ржмрзЗ тЬЕ

2я╕ПтГг ржХрзЗржи Keys ржжрж░ржХрж╛рж░? (Why)

Widgets ржЖрж▓рж╛ржжрж╛ ржХрж░рждрзЗ

State preserve ржХрж░рж╛рж░ ржЬржирзНржп

ржпржЦржи ржПржХржЗ Widget ржПржХрж╛ржзрж┐ржХржмрж╛рж░ ржерж╛ржХрзЗ (List, Grid, Form field)

ржЙржжрж╛рж╣рж░ржг:
ЁЯСЙ ржзрж░рзЛ рждрзБржорж┐ ржПржХржЯрж┐ ListView ржП TextField рж░рзЗржЦрзЗржЫрзЛред

Key ржЫрж╛рзЬрж╛ тЖТ Scroll ржХрж░рж▓рзЗ ржмрж╛ setState ржХрж░рж▓рзЗ TextField-ржПрж░ data reset рж╣рзЯрзЗ ржпрж╛ржмрзЗред

Key ржжрж┐рзЯрзЗ ржжрж┐рж▓рзЗ тЖТ Flutter ржмрзБржЭржмрзЗ ржПржЯрж┐ ржЖржЧрзЗрж░ TextField тЖТ data ржерж╛ржХржмрзЗред

3я╕ПтГг Keys ржПрж░ ржзрж░ржи (Types of Keys in Flutter)
ЁЯЯв 1. ValueKey

ржпржЦржи widget ржХрзЗ ржПржХржЯрж┐ ржирж┐рж░рзНржжрж┐рж╖рзНржЯ ржорж╛ржи (value) ржжрж┐рзЯрзЗ ржЖрж▓рж╛ржжрж╛ ржХрж░рждрзЗ ржЪрж╛ржУред

ValueKey("username_field")

ЁЯЯв 2. UniqueKey

ржкрзНрж░рждрзНржпрзЗржХржмрж╛рж░ ржирждрзБржи unique identity рждрзИрж░рж┐ ржХрж░рзЗред

Flutter ржпржЦржи rebuild рж╣рзЯ, UniqueKey ржорж╛ржирзЗ тЖТ ржкрзБрж░рзЛ Widget ржирждрзБржи ржХрж░рзЗ рждрзИрж░рж┐ рж╣ржмрзЗред

UniqueKey()

ЁЯЯв 3. ObjectKey

ржпржЦржи Widget ржХрзЗ ржПржХржЯрж┐ object reference ржжрж┐рзЯрзЗ ржЪрж┐рж╣рзНржирж┐ржд ржХрж░рждрзЗ ржЪрж╛ржУред

ObjectKey(myUserObject)

ЁЯЯв 4. GlobalKey

рж╕ржмржЪрзЗрзЯрзЗ powerful тЖТ Widget-ржПрж░ рж╕рж╛ржерзЗ ржкрзБрж░рзЛ State-ржХрзЗ globally access ржХрж░рждрзЗ ржжрзЗрзЯред

ржЙржжрж╛рж╣рж░ржг: ржПржХржЯрж┐ Form validate ржХрж░рждрзЗ GlobalKey<FormState> рж▓рж╛ржЧрзЗред

4я╕ПтГг ржмрж╛рж╕рзНрждржм ржЙржжрж╛рж╣рж░ржг (Real-life Analogy)

ржзрж░рзЛ рждрзЛржорж╛рж░ 10 ржЬржи ржмржирзНржзрзБ ржЖржЫрзЗ тЖТ рждрж╛ржжрзЗрж░ ржирж╛ржо ржжрж┐рзЯрзЗржЗ рждрзБржорж┐ ржЖрж▓рж╛ржжрж╛ ржХрж░рзЛред (ЁЯСЙ ValueKey)

ржпржжрж┐ ржирждрзБржи ржЬржирзНржо ржирж┐ржмржирзНржзржи ржиржорзНржмрж░ ржжрж╛ржУ тЖТ ржкрзНрж░рждрзНржпрзЗржХржмрж╛рж░ ржирждрзБржи unique ржЖржЗржбрж┐ рж╣рзЯред (ЁЯСЙ UniqueKey)

ржпржжрж┐ рждрж╛ржжрзЗрж░ ID Card object ржжрж┐рзЯрзЗ ржЪрж┐ржирзЛ тЖТ (ЁЯСЙ ObjectKey)

ржпржжрж┐ ржПржХржЬржиржХрзЗ рж╕ржмрж╛рж░ ржорж╛ржЭрзЗ ржбрж╛ржХрждрзЗ рж╣рзЯ ржпрзЗржЦрж╛ржирзЗржЗ ржерж╛ржХрзБржХ тЖТ (ЁЯСЙ GlobalKey)

5я╕ПтГг Code Example (Keys use-case)
Without Key (Problem)
ListView(
  children: [
    TextField(), // Username
    TextField(), // Password
  ],
);


ЁЯСЙ Rebuild рж╣рж▓рзЗ data reset рж╣рзЯрзЗ ржпрж╛ржмрзЗред

With ValueKey (Solution)
ListView(
  children: [
    TextField(key: ValueKey("username")), // Username
    TextField(key: ValueKey("password")), // Password
  ],
);


ЁЯСЙ ржПржЦржи rebuild рж╣рж▓рзЗржУ Flutter ржмрзБржЭржмрзЗ ржХрзЛржиржЯрж╛ Username, ржХрзЛржиржЯрж╛ Password тЖТ data ржерж╛ржХржмрзЗ тЬЕ

GlobalKey Example (Form)
final _formKey = GlobalKey<FormState>();

Form(
  key: _formKey,
  child: TextFormField(
    validator: (value) {
      if (value!.isEmpty) return "Required";
      return null;
    },
  ),
);

ElevatedButton(
  onPressed: () {
    if (_formKey.currentState!.validate()) {
      print("Form valid!");
    }
  },
  child: Text("Submit"),
)


ЁЯСЙ ржПржЦрж╛ржирзЗ GlobalKey ржмрзНржпржмрж╣рж╛рж░ ржХрж░рзЗ ржкрзБрж░рзЛ Form validate ржХрж░рж╛ рж╣ржЪрзНржЫрзЗред

6я╕ПтГг Output ржП ржкрзНрж░ржнрж╛ржм

Without Key тЖТ UI rebuild ржП data рж╣рж╛рж░рж┐рзЯрзЗ ржпрж╛ржмрзЗред

With Key тЖТ Flutter widget ржЪрж┐ржирзЗ ржлрзЗрж▓ржмрзЗ тЖТ data state ржерж╛ржХржмрзЗред